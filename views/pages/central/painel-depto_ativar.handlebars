<style>
  .table thead th { background:#6a3a7a; color:#fff; }
</style>

<div class="container-fluid px-3 py-2" style="width: 80%;height: 85vh;margin: auto;background-color: darkblue;overflow-y: auto;">
<div class="container py-3">
<h3 class="mb-3" style="color:#ffffff;">{{title}}</h3>


<table class="table table-sm table-bordered align-middle">
<thead class="table-primary">
<tr>
<th style="width:60%">Departamentos</th>
<th style="width:10%" class="text-center">Ativados</th>
<th style="width:30%" class="text-center">Ações</th>
</tr>
</thead>
<tbody>
{{#each departamentos}}
    <tr>
        <td>{{this.nomeDepartamento}}</td>
        <td class="text-center">{{#if this.ativado}}1{{else}}0{{/if}}</td>
        <td class="text-center">
            {{#if this.ativado}}
                <form method="POST" action="/segmento/departamentos/{{this._id}}/desativar" class="d-inline">
                    <button class="btn btn-sm btn-outline-danger">desativar</button>
                </form>
            {{else}}
                <form method="POST" action="/segmento/departamentos/{{this._id}}/ativar" class="d-inline">
                    <button class="btn btn-sm btn-outline-success">ativar</button>
                </form>
            {{/if}}
        </td>
    </tr>
{{/each}}
</tbody>
</table>
</div>

    
</div>

<script>
  const n=await Departamento.updateMany({ ativado: { $exists: false } }, { $set: { ativado: 0 } });
</script>